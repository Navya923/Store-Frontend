{"ast":null,"code":"var _jsxFileName = \"/home/npr/Downloads/Final FrontEnd (2)/src/components/Finance.js\";\n// import React from 'react';\n// import './table.css';\n// import Button from '@mui/material/Button';\n// import axios from 'axios';\n// import CheckBoxIcon from '@mui/icons-material/CheckBox';\n// import CancelIcon from '@mui/icons-material/Cancel';\n// export default class Finance extends React.Component {\n//     state = {\n//         products: [],\n//         loggedIn:false,\n//         isAdmin:false\n//     }\n//     componentDidMount() {\n//         let loggedIn = localStorage.getItem('LoggedIn');\n//         let isAdmin = localStorage.getItem('isAdmin')\n//         console.log('loggedIn',loggedIn,'isAdmin',isAdmin);\n//         if(loggedIn=='true'){\n//             this.setState({\n//                 loggedIn:true\n//             })\n//         }\n//         if(isAdmin=='true'){\n//             this.setState({\n//                 isAdmin:true\n//             })\n//         }\n//         axios.get('http://localhost:3001/getFinance')\n//             .then((res) => {\n//                 console.log(res);\n//                 let products = res.data.data.map((element) => {\n//                     let obj = {\n//                         projectID: element.projectID,\n//                         quantity: element.quantity,\n//                         requiredDate: element.requiredDate,\n//                         approvedByProcurement: element.approvedByProcurement,\n//                         approvedByFinance:element.approvedByFinance,\n//                         name:element.name,\n//                         price:element.price\n//                     }\n//                     return obj;\n//                 })\n//                 console.log(products)\n//                 this.setState({\n//                     products\n//                 });\n//             })\n//             .catch((Err) => {\n//                 console.log(Err);\n//             })\n//     }\n//     handleApprove = (element) => {\n//         console.log(element);\n//         let data = {\n//             projectID: element.projectID,\n//             approvedByFinance: 'Approved'\n//         };\n//         let updatedProducts = this.state.products.map((product) => {\n//             if (product.projectID == element.projectID) {\n//                 let obj = {\n//                     projectID: product.projectID,\n//                     quantity: product.quantity,\n//                     requiredDate: product.requiredDate,\n//                     approvedByFinance:  'Approved',\n//                     name:product.name,\n//                     price:product.price\n//                 }\n//                 return obj;\n//             } else {\n//                 return product;\n//             }\n//         })\n//         console.log('updatedProducts',updatedProducts)\n//         this.setState({\n//             products:updatedProducts\n//         });\n//         axios.put('http://localhost:3001/updateFinance', data)\n//             .then((response) => {\n//                 console.log(response);\n//                 let financeData = {\n//                     projectID: element.projectID,\n//                     approvedByFinance: 'Approved',\n//                     approvedByProcurement:'Approved',\n//                     requiredDate: element.requiredDate,\n//                     quantity: element.quantity,\n//                     name:element.name,\n//                     price:element.price\n//                 }\n//                 axios.post('http://localhost:3001/Logistics', financeData)\n//                     .then((updatedRes) => {\n//                         console.log(updatedRes);\n//                     }).catch((Err) => {\n//                         console.log(Err);\n//                     })\n//             }).catch((Err) => {\n//                 console.log(Err);\n//             })\n//     }\n//     handleReject = (element) => {\n//         console.log(element);\n//         let data = {\n//             projectID: element.projectID,\n//             approvedByFinance: 'Rejected'\n//         };\n//         axios.put('http://localhost:3001/updateFinance', data)\n//             .then((response) => {\n//                 console.log(response);\n//                 let updatedProducts = this.state.products.map((product) => {\n//                     if (product.projectID == element.projectID) {\n//                         let obj = {\n//                             projectID: product.projectID,\n//                             quantity: product.quantity,\n//                             requiredDate: product.requiredDate,\n//                             approvedByFinance:  'Rejected',\n//                             price:product.price,\n//                             name:product.price\n//                         }\n//                         return obj;\n//                     } else {\n//                         return product;\n//                     }\n//                 })\n//                 console.log('updatedProducts',updatedProducts)\n//                 this.setState({\n//                     products:updatedProducts\n//                 });\n//             }).catch((Err) => {\n//                 console.log(Err);\n//             })\n//     }\n//     render() {\n//         return (\n//             <div hidden={!(this.state.isAdmin&&this.state.loggedIn)}>\n//                   <div style={{color:'black'}}>\n//                 <h3>  Finance</h3>\n//                 </div>\n//                 <table>\n//                     <thead>\n//                         <th>Project ID</th>\n//                         <th>Quantity</th>\n//                         <th>Required Date</th>\n//                         <th>Price</th>\n//                         <th>Name</th>\n//                         <th>Action</th>\n//                     </thead>\n//                     <tbody>\n//                         {this.state.products.length > 0 ? this.state.products.map((element) => {\n//                             return (\n//                                 <tr key={element.projectID}>\n//                                     <td>{element.projectID}</td>\n//                                     <td>{element.quantity}</td>\n//                                     <td>{element.requiredDate}</td>\n//                                     <td>{element.price}</td>\n//                                     <td>{element.name}</td>\n//                                     <td>{element.approvedByFinance == 'Approved' ? <b>Approved<CheckBoxIcon></CheckBoxIcon></b> : element.approvedByFinance == 'Rejected' ? <b>Rejected<CancelIcon></CancelIcon></b> : null}<span hidden={element.approvedByFinance !== 'Pending'}> <Button onClick={()=>this.handleApprove(element)}>Approve<CheckBoxIcon></CheckBoxIcon></Button><Button onClick={()=>this.handleReject(element)}>Reject<CancelIcon></CancelIcon></Button></span></td>\n//                                 </tr>\n//                             )\n//                         }) : null}\n//                     </tbody>\n//                 </table>\n//             </div>\n//         )\n//     }\n// }\nimport React from 'react';\nimport './table.css';\nimport Button from '@mui/material/Button';\nimport axios from 'axios';\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\nimport CancelIcon from '@mui/icons-material/Cancel';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Finance extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      products: [],\n      loggedIn: true,\n      isAdmin: true\n    };\n\n    this.handleApprove = element => {\n      console.log(element);\n      let data = {\n        projectID: element.projectID,\n        approvedByFinance: 'Approved'\n      };\n      let updatedProducts = this.state.products.map(product => {\n        if (product.projectID == element.projectID) {\n          let obj = {\n            projectID: product.projectID,\n            quantity: product.quantity,\n            requiredDate: product.requiredDate,\n            approvedByFinance: 'Approved',\n            name: product.name,\n            price: product.price\n          };\n          return obj;\n        } else {\n          return product;\n        }\n      });\n      console.log('updatedProducts', updatedProducts);\n      this.setState({\n        products: updatedProducts\n      });\n      axios.put('http://localhost:3001/updateFinance', data).then(response => {\n        console.log(response);\n        let financeData = {\n          projectID: element.projectID,\n          approvedByFinance: 'Approved',\n          approvedByProcurement: 'Approved',\n          requiredDate: element.requiredDate,\n          quantity: element.quantity,\n          name: element.name,\n          price: element.price\n        };\n        axios.post('http://localhost:3001/Logistics', financeData).then(updatedRes => {\n          console.log(updatedRes);\n        }).catch(Err => {\n          console.log(Err);\n        });\n      }).catch(Err => {\n        console.log(Err);\n      });\n    };\n\n    this.handleReject = element => {\n      console.log(element);\n      let data = {\n        projectID: element.projectID,\n        approvedByFinance: 'Rejected'\n      };\n      axios.put('http://localhost:3001/updateFinance', data).then(response => {\n        console.log(response);\n        let updatedProducts = this.state.products.map(product => {\n          if (product.projectID == element.projectID) {\n            let obj = {\n              projectID: product.projectID,\n              quantity: product.quantity,\n              requiredDate: product.requiredDate,\n              approvedByFinance: 'Rejected',\n              price: product.price,\n              name: product.price\n            };\n            return obj;\n          } else {\n            return product;\n          }\n        });\n        console.log('updatedProducts', updatedProducts);\n        this.setState({\n          products: updatedProducts\n        });\n      }).catch(Err => {\n        console.log(Err);\n      });\n    };\n  }\n\n  componentDidMount() {\n    let loggedIn = localStorage.getItem('LoggedIn');\n    let isAdmin = localStorage.getItem('isAdmin');\n    console.log('loggedIn', loggedIn, 'isAdmin', isAdmin);\n\n    if (loggedIn == 'true') {\n      this.setState({\n        loggedIn: true\n      });\n    }\n\n    if (isAdmin == 'true') {\n      this.setState({\n        isAdmin: true\n      });\n    }\n\n    axios.get('http://localhost:3001/getFinance').then(res => {\n      console.log(res);\n      let products = res.data.data.map(element => {\n        let obj = {\n          productID: element.productID,\n          procurementID: element.procurementID,\n          quantity: element.quantity,\n          // requiredDate: element.requiredDate,\n          approvedByProcurement: element.approvedByProcurement,\n          price: element.price,\n          title: element.title\n        };\n        return obj;\n      });\n      console.log(products);\n      this.setState({\n        products\n      });\n    }).catch(Err => {\n      console.log(Err);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      hidden: !(this.state.isAdmin && this.state.loggedIn),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: 'black'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"  Finance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Product ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Quantity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: this.state.products.length > 0 ? this.state.products.map(element => {\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: element.productID\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: element.quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: element.price\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: element.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [element.approvedByFinance == 'Approved' ? /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: [\"Approved\", /*#__PURE__*/_jsxDEV(CheckBoxIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 327,\n                    columnNumber: 95\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 84\n                }, this) : element.approvedByFinance == 'Rejected' ? /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: [\"Rejected\", /*#__PURE__*/_jsxDEV(CancelIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 327,\n                    columnNumber: 184\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 173\n                }, this) : null, /*#__PURE__*/_jsxDEV(\"span\", {\n                  hidden: element.approvedByFinance !== 'Pending',\n                  children: [\" \", /*#__PURE__*/_jsxDEV(Button, {\n                    onClick: () => this.handleApprove(element),\n                    children: [\"Approve\", /*#__PURE__*/_jsxDEV(CheckBoxIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 327,\n                      columnNumber: 334\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 327,\n                    columnNumber: 277\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    onClick: () => this.handleReject(element),\n                    children: [\"Reject\", /*#__PURE__*/_jsxDEV(CancelIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 327,\n                      columnNumber: 427\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 327,\n                    columnNumber: 372\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 221\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 37\n              }, this)]\n            }, element.productID, true, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 33\n            }, this);\n          }) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/npr/Downloads/Final FrontEnd (2)/src/components/Finance.js"],"names":["React","Button","axios","CheckBoxIcon","CancelIcon","Finance","Component","state","products","loggedIn","isAdmin","handleApprove","element","console","log","data","projectID","approvedByFinance","updatedProducts","map","product","obj","quantity","requiredDate","name","price","setState","put","then","response","financeData","approvedByProcurement","post","updatedRes","catch","Err","handleReject","componentDidMount","localStorage","getItem","get","res","productID","procurementID","title","render","color","length"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,aAAP;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AACA,OAAOC,UAAP,MAAuB,4BAAvB;;AACA,eAAe,MAAMC,OAAN,SAAsBL,KAAK,CAACM,SAA5B,CAAsC;AAAA;AAAA;AAAA,SACjDC,KADiD,GACzC;AACJC,MAAAA,QAAQ,EAAE,EADN;AAEJC,MAAAA,QAAQ,EAAC,IAFL;AAGJC,MAAAA,OAAO,EAAC;AAHJ,KADyC;;AAAA,SA6CjDC,aA7CiD,GA6ChCC,OAAD,IAAa;AACzBC,MAAAA,O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","sourcesContent":["// import React from 'react';\r\n// import './table.css';\r\n// import Button from '@mui/material/Button';\r\n// import axios from 'axios';\r\n// import CheckBoxIcon from '@mui/icons-material/CheckBox';\r\n// import CancelIcon from '@mui/icons-material/Cancel';\r\n// export default class Finance extends React.Component {\r\n//     state = {\r\n//         products: [],\r\n//         loggedIn:false,\r\n//         isAdmin:false\r\n//     }\r\n//     componentDidMount() {\r\n//         let loggedIn = localStorage.getItem('LoggedIn');\r\n//         let isAdmin = localStorage.getItem('isAdmin')\r\n//         console.log('loggedIn',loggedIn,'isAdmin',isAdmin);\r\n//         if(loggedIn=='true'){\r\n//             this.setState({\r\n//                 loggedIn:true\r\n//             })\r\n//         }\r\n//         if(isAdmin=='true'){\r\n//             this.setState({\r\n//                 isAdmin:true\r\n//             })\r\n//         }\r\n//         axios.get('http://localhost:3001/getFinance')\r\n//             .then((res) => {\r\n//                 console.log(res);\r\n//                 let products = res.data.data.map((element) => {\r\n//                     let obj = {\r\n//                         projectID: element.projectID,\r\n//                         quantity: element.quantity,\r\n//                         requiredDate: element.requiredDate,\r\n//                         approvedByProcurement: element.approvedByProcurement,\r\n//                         approvedByFinance:element.approvedByFinance,\r\n//                         name:element.name,\r\n//                         price:element.price\r\n//                     }\r\n//                     return obj;\r\n//                 })\r\n//                 console.log(products)\r\n//                 this.setState({\r\n//                     products\r\n//                 });\r\n//             })\r\n//             .catch((Err) => {\r\n//                 console.log(Err);\r\n//             })\r\n//     }\r\n\r\n//     handleApprove = (element) => {\r\n//         console.log(element);\r\n//         let data = {\r\n//             projectID: element.projectID,\r\n//             approvedByFinance: 'Approved'\r\n//         };\r\n//         let updatedProducts = this.state.products.map((product) => {\r\n//             if (product.projectID == element.projectID) {\r\n//                 let obj = {\r\n//                     projectID: product.projectID,\r\n//                     quantity: product.quantity,\r\n//                     requiredDate: product.requiredDate,\r\n//                     approvedByFinance:  'Approved',\r\n//                     name:product.name,\r\n//                     price:product.price\r\n//                 }\r\n//                 return obj;\r\n//             } else {\r\n//                 return product;\r\n//             }\r\n//         })\r\n//         console.log('updatedProducts',updatedProducts)\r\n//         this.setState({\r\n//             products:updatedProducts\r\n//         });\r\n//         axios.put('http://localhost:3001/updateFinance', data)\r\n//             .then((response) => {\r\n//                 console.log(response);\r\n//                 let financeData = {\r\n//                     projectID: element.projectID,\r\n//                     approvedByFinance: 'Approved',\r\n//                     approvedByProcurement:'Approved',\r\n//                     requiredDate: element.requiredDate,\r\n//                     quantity: element.quantity,\r\n//                     name:element.name,\r\n//                     price:element.price\r\n//                 }\r\n//                 axios.post('http://localhost:3001/Logistics', financeData)\r\n//                     .then((updatedRes) => {\r\n//                         console.log(updatedRes);\r\n//                     }).catch((Err) => {\r\n//                         console.log(Err);\r\n//                     })\r\n//             }).catch((Err) => {\r\n//                 console.log(Err);\r\n//             })\r\n\r\n//     }\r\n\r\n\r\n//     handleReject = (element) => {\r\n//         console.log(element);\r\n//         let data = {\r\n//             projectID: element.projectID,\r\n//             approvedByFinance: 'Rejected'\r\n//         };\r\n//         axios.put('http://localhost:3001/updateFinance', data)\r\n//             .then((response) => {\r\n//                 console.log(response);\r\n//                 let updatedProducts = this.state.products.map((product) => {\r\n//                     if (product.projectID == element.projectID) {\r\n//                         let obj = {\r\n//                             projectID: product.projectID,\r\n//                             quantity: product.quantity,\r\n//                             requiredDate: product.requiredDate,\r\n//                             approvedByFinance:  'Rejected',\r\n//                             price:product.price,\r\n//                             name:product.price\r\n//                         }\r\n//                         return obj;\r\n//                     } else {\r\n//                         return product;\r\n//                     }\r\n//                 })\r\n//                 console.log('updatedProducts',updatedProducts)\r\n//                 this.setState({\r\n//                     products:updatedProducts\r\n//                 });\r\n//             }).catch((Err) => {\r\n//                 console.log(Err);\r\n//             })\r\n//     }\r\n//     render() {\r\n//         return (\r\n//             <div hidden={!(this.state.isAdmin&&this.state.loggedIn)}>\r\n//                   <div style={{color:'black'}}>\r\n//                 <h3>  Finance</h3>\r\n//                 </div>\r\n//                 <table>\r\n//                     <thead>\r\n//                         <th>Project ID</th>\r\n//                         <th>Quantity</th>\r\n//                         <th>Required Date</th>\r\n//                         <th>Price</th>\r\n//                         <th>Name</th>\r\n//                         <th>Action</th>\r\n//                     </thead>\r\n//                     <tbody>\r\n//                         {this.state.products.length > 0 ? this.state.products.map((element) => {\r\n//                             return (\r\n//                                 <tr key={element.projectID}>\r\n//                                     <td>{element.projectID}</td>\r\n//                                     <td>{element.quantity}</td>\r\n//                                     <td>{element.requiredDate}</td>\r\n//                                     <td>{element.price}</td>\r\n//                                     <td>{element.name}</td>\r\n//                                     <td>{element.approvedByFinance == 'Approved' ? <b>Approved<CheckBoxIcon></CheckBoxIcon></b> : element.approvedByFinance == 'Rejected' ? <b>Rejected<CancelIcon></CancelIcon></b> : null}<span hidden={element.approvedByFinance !== 'Pending'}> <Button onClick={()=>this.handleApprove(element)}>Approve<CheckBoxIcon></CheckBoxIcon></Button><Button onClick={()=>this.handleReject(element)}>Reject<CancelIcon></CancelIcon></Button></span></td>\r\n//                                 </tr>\r\n//                             )\r\n//                         }) : null}\r\n//                     </tbody>\r\n//                 </table>\r\n//             </div>\r\n//         )\r\n//     }\r\n// }\r\n\r\n\r\nimport React from 'react';\r\nimport './table.css';\r\nimport Button from '@mui/material/Button';\r\nimport axios from 'axios';\r\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\r\nimport CancelIcon from '@mui/icons-material/Cancel';\r\nexport default class Finance extends React.Component {\r\n    state = {\r\n        products: [],\r\n        loggedIn:true,\r\n        isAdmin:true\r\n    }\r\n    componentDidMount() {\r\n        let loggedIn = localStorage.getItem('LoggedIn');\r\n        let isAdmin = localStorage.getItem('isAdmin')\r\n        console.log('loggedIn',loggedIn,'isAdmin',isAdmin);\r\n        if(loggedIn=='true'){\r\n            this.setState({\r\n                loggedIn:true\r\n            })\r\n        }\r\n        if(isAdmin=='true'){\r\n            this.setState({\r\n                isAdmin:true\r\n            })\r\n        }\r\n        axios.get('http://localhost:3001/getFinance')\r\n            .then((res) => {\r\n                console.log(res);\r\n                let products = res.data.data.map((element) => {\r\n                    let obj = {\r\n                        productID: element.productID,\r\n                        procurementID: element.procurementID,\r\n                        quantity: element.quantity,\r\n                        // requiredDate: element.requiredDate,\r\n                        approvedByProcurement: element.approvedByProcurement,\r\n                        price:element.price,\r\n                        title:element.title\r\n                    }\r\n                    return obj;\r\n                })\r\n                console.log(products)\r\n                this.setState({\r\n                    products\r\n                });\r\n            })\r\n            .catch((Err) => {\r\n                console.log(Err);\r\n            })\r\n    }\r\n\r\n    handleApprove = (element) => {\r\n        console.log(element);\r\n        let data = {\r\n            projectID: element.projectID,\r\n            approvedByFinance: 'Approved'\r\n        };\r\n        let updatedProducts = this.state.products.map((product) => {\r\n            if (product.projectID == element.projectID) {\r\n                let obj = {\r\n                    projectID: product.projectID,\r\n                    quantity: product.quantity,\r\n                    requiredDate: product.requiredDate,\r\n                    approvedByFinance:  'Approved',\r\n                    name:product.name,\r\n                    price:product.price\r\n                }\r\n                return obj;\r\n            } else {\r\n                return product;\r\n            }\r\n        })\r\n        console.log('updatedProducts',updatedProducts)\r\n        this.setState({\r\n            products:updatedProducts\r\n        });\r\n        axios.put('http://localhost:3001/updateFinance', data)\r\n            .then((response) => {\r\n                console.log(response);\r\n                let financeData = {\r\n                    projectID: element.projectID,\r\n                    approvedByFinance: 'Approved',\r\n                    approvedByProcurement:'Approved',\r\n                    requiredDate: element.requiredDate,\r\n                    quantity: element.quantity,\r\n                    name:element.name,\r\n                    price:element.price\r\n                }\r\n                axios.post('http://localhost:3001/Logistics', financeData)\r\n                    .then((updatedRes) => {\r\n                        console.log(updatedRes);\r\n                    }).catch((Err) => {\r\n                        console.log(Err);\r\n                    })\r\n            }).catch((Err) => {\r\n                console.log(Err);\r\n            })\r\n\r\n    }\r\n\r\n\r\n    handleReject = (element) => {\r\n        console.log(element);\r\n        let data = {\r\n            projectID: element.projectID,\r\n            approvedByFinance: 'Rejected'\r\n        };\r\n        axios.put('http://localhost:3001/updateFinance', data)\r\n            .then((response) => {\r\n                console.log(response);\r\n                let updatedProducts = this.state.products.map((product) => {\r\n                    if (product.projectID == element.projectID) {\r\n                        let obj = {\r\n                            projectID: product.projectID,\r\n                            quantity: product.quantity,\r\n                            requiredDate: product.requiredDate,\r\n                            approvedByFinance:  'Rejected',\r\n                            price:product.price,\r\n                            name:product.price\r\n                        }\r\n                        return obj;\r\n                    } else {\r\n                        return product;\r\n                    }\r\n                })\r\n                console.log('updatedProducts',updatedProducts)\r\n                this.setState({\r\n                    products:updatedProducts\r\n                });\r\n            }).catch((Err) => {\r\n                console.log(Err);\r\n            })\r\n    }\r\n    render() {\r\n        return (\r\n            <div hidden={!(this.state.isAdmin&&this.state.loggedIn)}>\r\n                  <div style={{color:'black'}}>\r\n                <h3>  Finance</h3>\r\n                </div>\r\n                <table>\r\n                    <thead>\r\n                    <th>Product ID</th>\r\n                        <th>Quantity</th>\r\n                        {/* <th>Required Date</th> */}\r\n                        <th>Price</th>\r\n                        <th>Title</th>\r\n                        <th>Status</th>\r\n                    </thead>\r\n                    <tbody>\r\n                        {this.state.products.length > 0 ? this.state.products.map((element) => {\r\n                            return (\r\n                                <tr key={element.productID}>\r\n                                    <td>{element.productID}</td>\r\n                                    <td>{element.quantity}</td>\r\n                                    {/* <td>{element.requiredDate}</td> */}\r\n                                    <td>{element.price}</td>\r\n                                    <td>{element.title}</td>\r\n                                    <td>{element.approvedByFinance == 'Approved' ? <b>Approved<CheckBoxIcon></CheckBoxIcon></b> : element.approvedByFinance == 'Rejected' ? <b>Rejected<CancelIcon></CancelIcon></b> : null}<span hidden={element.approvedByFinance !== 'Pending'}> <Button onClick={()=>this.handleApprove(element)}>Approve<CheckBoxIcon></CheckBoxIcon></Button><Button onClick={()=>this.handleReject(element)}>Reject<CancelIcon></CancelIcon></Button></span></td>\r\n                                </tr>\r\n                            )\r\n                        }) : null}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n           \r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}