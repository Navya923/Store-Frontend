{"ast":null,"code":"var _jsxFileName = \"/home/npr/Downloads/Final FrontEnd (2)/src/components/Procurement.js\";\nimport React from 'react';\nimport './table.css';\nimport Button from '@mui/material/Button';\nimport axios from 'axios';\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\nimport CancelIcon from '@mui/icons-material/Cancel';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Procurement extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      products: [],\n      loggedIn: false,\n      isAdmin: false\n    };\n\n    this.handleApprove = element => {\n      console.log(element);\n      let data = {\n        projectID: element.projectID,\n        approvedByProcurement: 'Approved'\n      };\n      let updatedProducts = this.state.products.map(product => {\n        if (product.projectID == element.projectID) {\n          let obj = {\n            projectID: product.projectID,\n            quantity: product.quantity,\n            requiredDate: product.requiredDate,\n            approvedByProcurement: 'Approved',\n            price: element.price,\n            name: element.name\n          };\n          return obj;\n        } else {\n          return product;\n        }\n      });\n      console.log('updatedProducts', updatedProducts);\n      this.setState({\n        products: updatedProducts\n      });\n      axios.put('http://localhost:3001/updateProcurement', data).then(response => {\n        console.log(response);\n        let financeData = {\n          projectID: element.projectID,\n          approvedByProcurement: 'Approved',\n          requiredDate: element.requiredDate,\n          quantity: element.quantity,\n          name: element.name,\n          price: element.price\n        };\n        axios.post('http://localhost:3001/Finance', financeData).then(updatedRes => {\n          console.log(updatedRes);\n        }).catch(Err => {\n          console.log(Err);\n        });\n      }).catch(Err => {\n        console.log(Err);\n      });\n    };\n\n    this.handleReject = element => {\n      console.log(element);\n      let data = {\n        projectID: element.projectID,\n        approvedByProcurement: 'Rejected'\n      };\n      axios.put('http://localhost:3001/updateProcurement', data).then(response => {\n        console.log(response);\n        let updatedProducts = this.state.products.map(product => {\n          if (product.projectID == element.projectID) {\n            let obj = {\n              projectID: product.projectID,\n              quantity: product.quantity,\n              requiredDate: product.requiredDate,\n              approvedByProcurement: 'Rejected',\n              price: product.price,\n              name: product.name\n            };\n            return obj;\n          } else {\n            return product;\n          }\n        });\n        console.log('updatedProducts', updatedProducts);\n        this.setState({\n          products: updatedProducts\n        });\n      }).catch(Err => {\n        console.log(Err);\n      });\n    };\n  }\n\n  componentDidMount() {\n    let loggedIn = localStorage.getItem('LoggedIn');\n    let isAdmin = localStorage.getItem('isAdmin');\n    console.log('loggedIn', loggedIn, 'isAdmin', isAdmin);\n\n    if (loggedIn == 'true') {\n      this.setState({\n        loggedIn: true\n      });\n    }\n\n    if (isAdmin == 'true') {\n      this.setState({\n        isAdmin: true\n      });\n    }\n\n    axios.post('http://localhost:8080/Procurement/procurement').then(res => {\n      console.log(res);\n      let products = res.data.data.map(element => {\n        let obj = {\n          projectID: element.projectID,\n          quantity: element.quantity,\n          requiredDate: element.requiredDate,\n          approvedByProcurement: element.approvedByProcurement,\n          price: element.price,\n          name: element.name\n        };\n        return obj;\n      });\n      console.log(products);\n      this.setState({\n        products\n      });\n    }).catch(Err => {\n      console.log(Err);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      hidden: !(this.state.isAdmin && this.state.loggedIn),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: 'black'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Procurement\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Project ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Quantity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Required Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Action\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: this.state.products.length > 0 ? this.state.products.map(element => {\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: element.projectID\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: element.quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: element.requiredDate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: element.price\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: element.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [element.approvedByProcurement == 'Approved' ? /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: [\"Approved\", /*#__PURE__*/_jsxDEV(CheckBoxIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 99\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 88\n                }, this) : element.approvedByFinance == 'Rejected' ? /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: [\"Rejected\", /*#__PURE__*/_jsxDEV(CancelIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 188\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 177\n                }, this) : null, /*#__PURE__*/_jsxDEV(\"span\", {\n                  hidden: element.approvedByProcurement !== 'Pending',\n                  children: [\" \", /*#__PURE__*/_jsxDEV(Button, {\n                    onClick: () => this.handleApprove(element),\n                    children: [\"Approve\", /*#__PURE__*/_jsxDEV(CheckBoxIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 153,\n                      columnNumber: 342\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 285\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    onClick: () => this.handleReject(element),\n                    children: [\"Reject\", /*#__PURE__*/_jsxDEV(CancelIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 153,\n                      columnNumber: 435\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 380\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 225\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 37\n              }, this)]\n            }, element.projectID, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 33\n            }, this);\n          }) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/npr/Downloads/Final FrontEnd (2)/src/components/Procurement.js"],"names":["React","Button","axios","CheckBoxIcon","CancelIcon","Procurement","Component","state","products","loggedIn","isAdmin","handleApprove","element","console","log","data","projectID","approvedByProcurement","updatedProducts","map","product","obj","quantity","requiredDate","price","name","setState","put","then","response","financeData","post","updatedRes","catch","Err","handleReject","componentDidMount","localStorage","getItem","res","render","color","length","approvedByFinance"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,aAAP;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AACA,OAAOC,UAAP,MAAuB,4BAAvB;;AACA,eAAe,MAAMC,WAAN,SAA0BL,KAAK,CAACM,SAAhC,CAA0C;AAAA;AAAA;AAAA,SACrDC,KADqD,GAC7C;AACJC,MAAAA,QAAQ,EAAE,EADN;AAEJC,MAAAA,QAAQ,EAAC,KAFL;AAGJC,MAAAA,OAAO,EAAC;AAHJ,KAD6C;;AAAA,SA2CrDC,aA3CqD,GA2CpCC,OAAD,IAAa;AACzBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACA,UAAIG,IAAI,GAAG;AACPC,QAAAA,SAAS,EAAEJ,OAAO,CAACI,SADZ;AAEPC,QAAAA,qBAAqB,EAAE;AAFhB,OAAX;AAIA,UAAIC,eAAe,GAAG,KAAKX,KAAL,CAAWC,QAAX,CAAoBW,GAApB,CAAyBC,OAAD,IAAa;AACvD,YAAIA,OAAO,CAACJ,SAAR,IAAqBJ,OAAO,CAACI,SAAjC,EAA4C;AACxC,cAAIK,GAAG,GAAG;AACNL,YAAAA,SAAS,EAAEI,OAAO,CAACJ,SADb;AAENM,YAAAA,QAAQ,EAAEF,OAAO,CAACE,QAFZ;AAGNC,YAAAA,YAAY,EAAEH,OAAO,CAACG,YAHhB;AAINN,YAAAA,qBAAqB,EAAG,UAJlB;AAKNO,YAAAA,KAAK,EAACZ,OAAO,CAACY,KALR;AAMNC,YAAAA,IAAI,EAACb,OAAO,CAACa;AANP,WAAV;AAQA,iBAAOJ,GAAP;AACH,SAVD,MAUO;AACH,iBAAOD,OAAP;AACH;AACJ,OAdqB,CAAtB;AAeAP,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8BI,eAA9B;AACA,WAAKQ,QAAL,CAAc;AACVlB,QAAAA,QAAQ,EAACU;AADC,OAAd;AAGAhB,MAAAA,KAAK,CAACyB,GAAN,CAAU,yCAAV,EAAqDZ,IAArD,EACKa,IADL,CACWC,QAAD,IAAc;AAChBhB,QAAAA,OAAO,CAACC,GAAR,CAAYe,QAAZ;AACA,YAAIC,WAAW,GAAG;AACdd,UAAAA,SAAS,EAAEJ,OAAO,CAACI,SADL;AAEdC,UAAAA,qBAAqB,EAAE,UAFT;AAGdM,UAAAA,YAAY,EAAEX,OAAO,CAACW,YAHR;AAIdD,UAAAA,QAAQ,EAAEV,OAAO,CAACU,QAJJ;AAKdG,UAAAA,IAAI,EAACb,OAAO,CAACa,IALC;AAMdD,UAAAA,KAAK,EAACZ,OAAO,CAACY;AANA,SAAlB;AAQAtB,QAAAA,KAAK,CAAC6B,IAAN,CAAW,+BAAX,EAA4CD,WAA5C,EACKF,IADL,CACWI,UAAD,IAAgB;AAClBnB,UAAAA,OAAO,CAACC,GAAR,CAAYkB,UAAZ;AACH,SAHL,EAGOC,KAHP,CAGcC,GAAD,IAAS;AACdrB,UAAAA,OAAO,CAACC,GAAR,CAAYoB,GAAZ;AACH,SALL;AAMH,OAjBL,EAiBOD,KAjBP,CAiBcC,GAAD,IAAS;AACdrB,QAAAA,OAAO,CAACC,GAAR,CAAYoB,GAAZ;AACH,OAnBL;AAqBH,KAzFoD;;AAAA,SA0FrDC,YA1FqD,GA0FrCvB,OAAD,IAAa;AACxBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACA,UAAIG,IAAI,GAAG;AACPC,QAAAA,SAAS,EAAEJ,OAAO,CAACI,SADZ;AAEPC,QAAAA,qBAAqB,EAAE;AAFhB,OAAX;AAIAf,MAAAA,KAAK,CAACyB,GAAN,CAAU,yCAAV,EAAqDZ,IAArD,EACKa,IADL,CACWC,QAAD,IAAc;AAChBhB,QAAAA,OAAO,CAACC,GAAR,CAAYe,QAAZ;AACA,YAAIX,eAAe,GAAG,KAAKX,KAAL,CAAWC,QAAX,CAAoBW,GAApB,CAAyBC,OAAD,IAAa;AACvD,cAAIA,OAAO,CAACJ,SAAR,IAAqBJ,OAAO,CAACI,SAAjC,EAA4C;AACxC,gBAAIK,GAAG,GAAG;AACNL,cAAAA,SAAS,EAAEI,OAAO,CAACJ,SADb;AAENM,cAAAA,QAAQ,EAAEF,OAAO,CAACE,QAFZ;AAGNC,cAAAA,YAAY,EAAEH,OAAO,CAACG,YAHhB;AAINN,cAAAA,qBAAqB,EAAG,UAJlB;AAKNO,cAAAA,KAAK,EAACJ,OAAO,CAACI,KALR;AAMNC,cAAAA,IAAI,EAACL,OAAO,CAACK;AANP,aAAV;AAQA,mBAAOJ,GAAP;AACH,WAVD,MAUO;AACH,mBAAOD,OAAP;AACH;AACJ,SAdqB,CAAtB;AAeAP,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8BI,eAA9B;AACA,aAAKQ,QAAL,CAAc;AACVlB,UAAAA,QAAQ,EAACU;AADC,SAAd;AAGH,OAtBL,EAsBOe,KAtBP,CAsBcC,GAAD,IAAS;AACdrB,QAAAA,OAAO,CAACC,GAAR,CAAYoB,GAAZ;AACH,OAxBL;AAyBH,KAzHoD;AAAA;;AAMrDE,EAAAA,iBAAiB,GAAG;AAChB,QAAI3B,QAAQ,GAAG4B,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAf;AACA,QAAI5B,OAAO,GAAG2B,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAd;AACAzB,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBL,QAAvB,EAAgC,SAAhC,EAA0CC,OAA1C;;AACA,QAAGD,QAAQ,IAAE,MAAb,EAAoB;AAChB,WAAKiB,QAAL,CAAc;AACVjB,QAAAA,QAAQ,EAAC;AADC,OAAd;AAGH;;AACD,QAAGC,OAAO,IAAE,MAAZ,EAAmB;AACf,WAAKgB,QAAL,CAAc;AACVhB,QAAAA,OAAO,EAAC;AADE,OAAd;AAGH;;AACDR,IAAAA,KAAK,CAAC6B,IAAN,CAAW,+CAAX,EACKH,IADL,CACWW,GAAD,IAAS;AACX1B,MAAAA,OAAO,CAACC,GAAR,CAAYyB,GAAZ;AACA,UAAI/B,QAAQ,GAAG+B,GAAG,CAACxB,IAAJ,CAASA,IAAT,CAAcI,GAAd,CAAmBP,OAAD,IAAa;AAC1C,YAAIS,GAAG,GAAG;AACNL,UAAAA,SAAS,EAAEJ,OAAO,CAACI,SADb;AAENM,UAAAA,QAAQ,EAAEV,OAAO,CAACU,QAFZ;AAGNC,UAAAA,YAAY,EAAEX,OAAO,CAACW,YAHhB;AAINN,UAAAA,qBAAqB,EAAEL,OAAO,CAACK,qBAJzB;AAKNO,UAAAA,KAAK,EAACZ,OAAO,CAACY,KALR;AAMNC,UAAAA,IAAI,EAACb,OAAO,CAACa;AANP,SAAV;AAQA,eAAOJ,GAAP;AACH,OAVc,CAAf;AAWAR,MAAAA,OAAO,CAACC,GAAR,CAAYN,QAAZ;AACA,WAAKkB,QAAL,CAAc;AACVlB,QAAAA;AADU,OAAd;AAGH,KAlBL,EAmBKyB,KAnBL,CAmBYC,GAAD,IAAS;AACZrB,MAAAA,OAAO,CAACC,GAAR,CAAYoB,GAAZ;AACH,KArBL;AAsBH;;AAgFDM,EAAAA,MAAM,GAAG;AACL,wBACI;AAAK,MAAA,MAAM,EAAE,EAAE,KAAKjC,KAAL,CAAWG,OAAX,IAAoB,KAAKH,KAAL,CAAWE,QAAjC,CAAb;AAAA,8BACQ;AAAK,QAAA,KAAK,EAAE;AAACgC,UAAAA,KAAK,EAAC;AAAP,SAAZ;AAAA,+BACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADI;AAAA;AAAA;AAAA;AAAA,cADR,eAII;AAAA,gCACI;AAAA,kCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALJ,eAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eASI;AAAA,oBACK,KAAKlC,KAAL,CAAWC,QAAX,CAAoBkC,MAApB,GAA6B,CAA7B,GAAiC,KAAKnC,KAAL,CAAWC,QAAX,CAAoBW,GAApB,CAAyBP,OAAD,IAAa;AACnE,gCACI;AAAA,sCACI;AAAA,0BAAKA,OAAO,CAACI;AAAb;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAA,0BAAKJ,OAAO,CAACU;AAAb;AAAA;AAAA;AAAA;AAAA,sBAFJ,eAGI;AAAA,0BAAKV,OAAO,CAACW;AAAb;AAAA;AAAA;AAAA;AAAA,sBAHJ,eAII;AAAA,0BAAKX,OAAO,CAACY;AAAb;AAAA;AAAA;AAAA;AAAA,sBAJJ,eAKI;AAAA,0BAAKZ,OAAO,CAACa;AAAb;AAAA;AAAA;AAAA;AAAA,sBALJ,eAMI;AAAA,2BAAKb,OAAO,CAACK,qBAAR,IAAiC,UAAjC,gBAA8C;AAAA,sDAAW,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,0BAAX;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA9C,GAA6FL,OAAO,CAAC+B,iBAAR,IAA6B,UAA7B,gBAA0C;AAAA,sDAAW,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,0BAAX;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA1C,GAAqF,IAAvL,eAA4L;AAAM,kBAAA,MAAM,EAAE/B,OAAO,CAACK,qBAAR,KAAkC,SAAhD;AAAA,+CAA4D,QAAC,MAAD;AAAQ,oBAAA,OAAO,EAAE,MAAI,KAAKN,aAAL,CAAmBC,OAAnB,CAArB;AAAA,uDAAyD,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,4BAAzD;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA5D,eAA2J,QAAC,MAAD;AAAQ,oBAAA,OAAO,EAAE,MAAI,KAAKuB,YAAL,CAAkBvB,OAAlB,CAArB;AAAA,sDAAuD,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,4BAAvD;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA3J;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA5L;AAAA;AAAA;AAAA;AAAA;AAAA,sBANJ;AAAA,eAASA,OAAO,CAACI,SAAjB;AAAA;AAAA;AAAA;AAAA,oBADJ;AAUH,WAXiC,CAAjC,GAWI;AAZT;AAAA;AAAA;AAAA;AAAA,gBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AA+BH;;AA1JoD","sourcesContent":["import React from 'react';\r\nimport './table.css';\r\nimport Button from '@mui/material/Button';\r\nimport axios from 'axios';\r\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\r\nimport CancelIcon from '@mui/icons-material/Cancel';\r\nexport default class Procurement extends React.Component {\r\n    state = {\r\n        products: [],\r\n        loggedIn:false,\r\n        isAdmin:false\r\n    }\r\n    componentDidMount() {\r\n        let loggedIn = localStorage.getItem('LoggedIn');\r\n        let isAdmin = localStorage.getItem('isAdmin')\r\n        console.log('loggedIn',loggedIn,'isAdmin',isAdmin);\r\n        if(loggedIn=='true'){\r\n            this.setState({\r\n                loggedIn:true\r\n            })\r\n        }\r\n        if(isAdmin=='true'){\r\n            this.setState({\r\n                isAdmin:true\r\n            })\r\n        }\r\n        axios.post('http://localhost:8080/Procurement/procurement')\r\n            .then((res) => {\r\n                console.log(res);\r\n                let products = res.data.data.map((element) => {\r\n                    let obj = {\r\n                        projectID: element.projectID,\r\n                        quantity: element.quantity,\r\n                        requiredDate: element.requiredDate,\r\n                        approvedByProcurement: element.approvedByProcurement,\r\n                        price:element.price,\r\n                        name:element.name\r\n                    }\r\n                    return obj;\r\n                })\r\n                console.log(products)\r\n                this.setState({\r\n                    products\r\n                });\r\n            })\r\n            .catch((Err) => {\r\n                console.log(Err);\r\n            })\r\n    }\r\n    handleApprove = (element) => {\r\n        console.log(element);\r\n        let data = {\r\n            projectID: element.projectID,\r\n            approvedByProcurement: 'Approved'\r\n        };\r\n        let updatedProducts = this.state.products.map((product) => {\r\n            if (product.projectID == element.projectID) {\r\n                let obj = {\r\n                    projectID: product.projectID,\r\n                    quantity: product.quantity,\r\n                    requiredDate: product.requiredDate,\r\n                    approvedByProcurement:  'Approved',\r\n                    price:element.price,\r\n                    name:element.name\r\n                }\r\n                return obj;\r\n            } else {\r\n                return product;\r\n            }\r\n        })\r\n        console.log('updatedProducts',updatedProducts)\r\n        this.setState({\r\n            products:updatedProducts\r\n        });\r\n        axios.put('http://localhost:3001/updateProcurement', data)\r\n            .then((response) => {\r\n                console.log(response);\r\n                let financeData = {\r\n                    projectID: element.projectID,\r\n                    approvedByProcurement: 'Approved',\r\n                    requiredDate: element.requiredDate,\r\n                    quantity: element.quantity,\r\n                    name:element.name,\r\n                    price:element.price\r\n                }\r\n                axios.post('http://localhost:3001/Finance', financeData)\r\n                    .then((updatedRes) => {\r\n                        console.log(updatedRes);\r\n                    }).catch((Err) => {\r\n                        console.log(Err);\r\n                    })\r\n            }).catch((Err) => {\r\n                console.log(Err);\r\n            })\r\n\r\n    }\r\n    handleReject = (element) => {\r\n        console.log(element);\r\n        let data = {\r\n            projectID: element.projectID,\r\n            approvedByProcurement: 'Rejected'\r\n        };\r\n        axios.put('http://localhost:3001/updateProcurement', data)\r\n            .then((response) => {\r\n                console.log(response);\r\n                let updatedProducts = this.state.products.map((product) => {\r\n                    if (product.projectID == element.projectID) {\r\n                        let obj = {\r\n                            projectID: product.projectID,\r\n                            quantity: product.quantity,\r\n                            requiredDate: product.requiredDate,\r\n                            approvedByProcurement:  'Rejected',\r\n                            price:product.price,\r\n                            name:product.name\r\n                        }\r\n                        return obj;\r\n                    } else {\r\n                        return product;\r\n                    }\r\n                })\r\n                console.log('updatedProducts',updatedProducts)\r\n                this.setState({\r\n                    products:updatedProducts\r\n                });\r\n            }).catch((Err) => {\r\n                console.log(Err);\r\n            })\r\n    }\r\n    render() {\r\n        return (\r\n            <div hidden={!(this.state.isAdmin&&this.state.loggedIn)}>\r\n                    <div style={{color:'black'}}>\r\n                <h3>Procurement</h3>\r\n                </div>\r\n                <table>\r\n                    <thead>\r\n                        <th>Project ID</th>\r\n                        <th>Quantity</th>\r\n                        <th>Required Date</th>\r\n                        <th>Price</th>\r\n                        <th>Name</th>\r\n                        <th>Action</th>\r\n                    </thead>\r\n                    <tbody>\r\n                        {this.state.products.length > 0 ? this.state.products.map((element) => {\r\n                            return (\r\n                                <tr key={element.projectID}>\r\n                                    <td>{element.projectID}</td>\r\n                                    <td>{element.quantity}</td>\r\n                                    <td>{element.requiredDate}</td>\r\n                                    <td>{element.price}</td>\r\n                                    <td>{element.name}</td>\r\n                                    <td>{element.approvedByProcurement == 'Approved' ? <b>Approved<CheckBoxIcon></CheckBoxIcon></b> : element.approvedByFinance == 'Rejected' ? <b>Rejected<CancelIcon></CancelIcon></b> : null}<span hidden={element.approvedByProcurement !== 'Pending'}> <Button onClick={()=>this.handleApprove(element)}>Approve<CheckBoxIcon></CheckBoxIcon></Button><Button onClick={()=>this.handleReject(element)}>Reject<CancelIcon></CancelIcon></Button></span></td>\r\n                                </tr>\r\n                            )\r\n                        }) : null}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}